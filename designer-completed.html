<!DOCTYPE html>
<html>
<head>
    <title>Completed Reviews ‚Äì Designer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Completed Reviews</h1>

    <div class="navbar">
        <a href="designer-dashboard.html">üè† Dashboard</a>
        <a href="designer-pending.html">Pending</a>
        <a href="designer-completed.html">Completed</a>
    </div>

    <div class="container" id="completedList"></div>

    <script>
        let submissions = JSON.parse(localStorage.getItem("submissions")) || [];
        const list = document.getElementById("completedList");

        // Completed = Approved, Rejected, Completed Review
        const done = submissions.filter(
            s => s.status === "Completed Review" || s.status === "Approved" || s.status === "Rejected"
        );

        if (done.length === 0) {
            list.innerHTML = "<p>No completed reviews yet.</p>";
        }

        done.forEach((item, index) => {
            const card = document.createElement("div");
            card.className = "card";

            card.innerHTML = `
                <strong>${item.roomName}</strong><br>
                <p><b>Status:</b> ${item.status}</p>
                <p><b>Notes:</b> ${item.notes || "No notes added"}</p>

                <button onclick="moveToPending('${item.roomName}')">Move to Pending</button>
                <button onclick="deleteSubmission('${item.roomName}')">Delete</button>
            `;

            list.appendChild(card);
        });

        function moveToPending(roomName) {
            let match = submissions.find(s => s.roomName === roomName);
            match.status = "Pending Review";

            localStorage.setItem("submissions", JSON.stringify(submissions));
            alert("Submission moved back to Pending.");
            location.reload();
        }

        function deleteSubmission(roomName) {
            submissions = submissions.filter(s => s.roomName !== roomName);

            localStorage.setItem("submissions", JSON.stringify(submissions));
            alert("Submission deleted.");
            location.reload();
        }
    </script>

</body>
</html>
