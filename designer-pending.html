<!DOCTYPE html>
<html>
<head>
    <title>Pending Submissions ‚Äì Designer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Pending Submissions</h1>

    <div class="navbar">
        <a href="designer-dashboard.html">üè† Dashboard</a>
        <a href="designer-pending.html">üì• Pending</a>
        <a href="designer-completed.html">‚úÖ Completed</a>
    </div>

    <div class="container" id="list"></div>

    <script>
        let submissions = JSON.parse(localStorage.getItem("submissions")) || [];

        const pending = submissions.filter(s => s.status === "Pending Review");
        const list = document.getElementById("list");

        if (pending.length === 0) {
            list.innerHTML = "<p>No pending submissions.</p>";
        }

        pending.forEach((item, index) => {
            const card = document.createElement("div");
            card.className = "card";

            card.innerHTML = `
                <strong>${item.roomName}</strong><br>
                <p><b>Size:</b> ${item.roomSize}</p>
                <p><b>Description:</b> ${item.roomDesc}</p>

                <button onclick="review(${index})">Review Submission</button>
                <button onclick="approve(${index})">Approve</button>
                <button onclick="reject(${index})">Reject</button>
                <button onclick="addNotes(${index})">Add Notes</button>
            `;

            list.appendChild(card);
        });

        function review(i) {
            localStorage.setItem("currentReview", JSON.stringify(pending[i]));
            window.location.href = "designer-review.html";
        }

        function approve(i) {
            const match = submissions.find(s => s.roomName === pending[i].roomName);
            match.status = "Approved";
            localStorage.setItem("submissions", JSON.stringify(submissions));
            alert("Submission was approved");
            location.reload();
        }

        function reject(i) {
            const match = submissions.find(s => s.roomName === pending[i].roomName);
            match.status = "Rejected";
            localStorage.setItem("submissions", JSON.stringify(submissions));
            alert("Submission was rejected");
            location.reload();
        }

        function addNotes(i) {
            const notes = prompt("Enter notes for homeowner:");
            if (!notes) return;

            const match = submissions.find(s => s.roomName === pending[i].roomName);
            match.notes = notes;
            localStorage.setItem("submissions", JSON.stringify(submissions));
            alert("Notes added!");
        }
    </script>

</body>
</html>
