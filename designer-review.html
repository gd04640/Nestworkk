<!DOCTYPE html>
<html>
<head>
    <title>Review Submission ‚Äì Designer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Review Submission</h1>

<div class="navbar">
    <a href="designer-dashboard.html">üè† Dashboard</a>
    <a href="designer-pending.html">üì• Pending</a>
    <a href="designer-completed.html"‚úÖ Completed</a>
</div>

<div class="container">
    <div id="reviewBox"></div>
</div>

<script>
    // Load current review
    const submission = JSON.parse(localStorage.getItem("currentReview"));
    const allSubs = JSON.parse(localStorage.getItem("submissions")) || [];
    const div = document.getElementById("reviewBox");

    if (!submission) {
        div.innerHTML = "<p>No submission selected.</p>";
    } else {
        div.innerHTML = `
            <div class="card">
                <h2>${submission.roomName}</h2>
                <p><b>Size:</b> ${submission.roomSize}</p>
                <p><b>Description:</b> ${submission.roomDesc}</p>

                <label><b>Add Designer Notes:</b></label>
                <textarea id="notes" placeholder="Write your design feedback here..."></textarea>

                <button onclick="saveReview()">Save Feedback</button>
                <button onclick="markCompleted()">Mark as Completed</button>
            </div>
        `;
    }

    function saveReview() {
        const notes = document.getElementById("notes").value.trim();
        if (!notes) return alert("Please write some notes first!");

        const match = allSubs.find(s => s.roomName === submission.roomName);
        match.notes = notes;
        match.status = "In Progress";

        localStorage.setItem("submissions", JSON.stringify(allSubs));
        alert("Feedback saved!");
    }

    function markCompleted() {
        const notes = document.getElementById("notes").value.trim();
        if (!notes) return alert("Please enter feedback before completing!");

        const match = allSubs.find(s => s.roomName === submission.roomName);
        match.notes = notes;
        match.status = "Completed Review";
        match.completedAt = new Date().toLocaleString();

        localStorage.setItem("submissions", JSON.stringify(allSubs));

        alert("Review marked as completed!");
        window.location.href = "designer-completed.html";
    }
</script>

</body>
</html>
